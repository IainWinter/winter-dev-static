<html lang="en">
 
<head>
	<title>UV Sphere</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="icon" type="image/x-icon" href="../../favicon.ico">
	<link rel="stylesheet" href="../../styles/global.css" />
	<link rel="stylesheet" href="../../styles/top.css" />
	<link rel="stylesheet" href="../../styles/card.css" />
	<link rel="stylesheet" href="../../styles/code.css" />
	<link rel="stylesheet" href="../../styles/article.css" />
	<link rel="stylesheet" href="../../projects/mesh/style.css">
</head>


		<script>
			const g_exportRootPath = "../../";
			function ref(path) { return g_exportRootPath + path; }
		</script>
	
<script src="../../scripts/no_flashbang.js"></script>

<body color-theme="dark">
	<div class="main">
		
		<div class="top">
			<h1 class="title">Winter</h1>
			<div class="nav-section">
				<div class="nav-links">
					<a class="nav-link" href="../../articles">Articles</a>
					<a class="nav-link" href="../../projects">Projects</a>
					<a class="nav-link" href="../../support">Support</a>
				</div>

				<hr class="nav-separator" />

				<div class="nav-buttons">
					<img id="toggle-dark-icon" src="../../icons/light_off.svg" onclick="toggleDark();"/>
				</div>
			</div>
		</div>
		<script src="../../scripts/toggle_dark.js"></script>
	
		<div class="page">
			<h1 class="page-title"><a href="../../projects/mesh">Mesh</a> / UV Sphere</h1>
			<div class="draw-left-line">
				<p class="article-code-file mark-section">Shape</p>
				<div class="shape-side-panel">
					
		<div id="uvsphere"></div>
		<div id="uvsphere-tools"></div>
	
				</div>
			</div>

			<div class="shape-article-text">
				
		<div class="article-code draw-left-line">
			<p class="article-code-file mark-section">UVSphere.h</p>
			<pre class="article-code-text cpp">
</span><span class="code-a">#pragma once

</span><span class="code-a">#include </span><span class="code-l">"glm/vec2.hpp</span><span class="code-q">"
</span><span class="code-a">#include </span><span class="code-l">"glm/vec3.hpp</span><span class="code-q">"
</span><span class="code-a">#include </span><span class="code-l">"glm/geometric.hpp</span><span class="code-q">"
</span><span class="code-a">#include </span><span class="None"></span><span class="code-l">&lt</span><span class="None"></span><span class="code-l">vector</span><span class="None"></span><span class="code-l">&gt

</span><span class="code-r">using namespace </span><span class="code-w">glm</span><span class="code-s">;

</span><span class="code-r">struct </span><span class="code-t">UVSphere </span><span class="code-s">{
	</span><span class="code-n">std</span><span class="code-s">::</span><span class="code-t">vector</span><span class="code-s">&lt</span><span class="code-r">int</span><span class="code-s">&gt </span><span class="code-w">index</span><span class="code-s">;
	</span><span class="code-n">std</span><span class="code-s">::</span><span class="code-t">vector</span><span class="code-s">&lt</span><span class="code-t">vec3</span><span class="code-s">&gt </span><span class="code-w">pos</span><span class="code-s">;
	</span><span class="code-n">std</span><span class="code-s">::</span><span class="code-t">vector</span><span class="code-s">&lt</span><span class="code-t">vec2</span><span class="code-s">&gt </span><span class="code-w">uvs</span><span class="code-s">;
</span><span class="code-s">}</span><span class="code-s">;

</span><span class="code-t">UVSphere </span><span class="None"></span><span class="code-f">MakeUVSphere</span><span class="code-s">(</span><span class="code-r">int </span><span class="code-a"></span><span class="code-a">latCount</span><span class="code-s">, </span><span class="code-r">int </span><span class="code-a"></span><span class="code-a">latCount</span><span class="code-s">)</span><span class="code-s">;
</span></pre>
		</div>
	
		<div class="article-code draw-left-line">
			<p class="article-code-file mark-section">UVSphere.cpp</p>
			<pre class="article-code-text cpp">
</span><span class="code-a">#include </span><span class="code-l">"uvsphere.h</span><span class="code-q">"

</span><span class="code-r">static </span><span class="code-r">const </span><span class="code-r">float </span><span class="code-n">pi </span><span class="code-s">= </span><span class="code-d">3.1415927f</span><span class="code-s">;

</span><span class="code-t">UVSphere </span><span class="None"></span><span class="code-f">MakeUVSphere</span><span class="code-s">(</span><span class="code-r">int </span><span class="code-a">latCount</span><span class="code-s">, </span><span class="code-r">int </span><span class="code-a">lonCount</span><span class="code-s">) </span><span class="code-s">{
	</span><span class="code-j">if </span><span class="code-s">(</span><span class="code-a">latCount </span><span class="code-s">&lt </span><span class="code-d">2 </span><span class="code-s">|</span><span class="code-s">| </span><span class="code-a">lonCount </span><span class="code-s">&lt </span><span class="code-d">2</span><span class="code-s">) </span><span class="code-s">{
		</span><span class="code-j">return </span><span class="code-s">{</span><span class="code-s">}</span><span class="code-s">;
	</span><span class="code-s">}

	</span><span class="code-c">// Each longitudinal count makes two triangles (6 indices) for every
	</span><span class="code-c">// lateral count except for the top and bottom poles, which only make
	</span><span class="code-c">// one triangle per longitudinal count.

	</span><span class="code-c">// UV maps require two vertices with the same position, but different UVs
	</span><span class="code-c">// so we need counts + 1.

	</span><span class="code-r">const </span><span class="code-r">int </span><span class="code-v">totalIndexCount </span><span class="code-s">= </span><span class="code-d">6 </span><span class="code-s">* </span><span class="code-s">(</span><span class="code-a">latCount </span><span class="code-s">- </span><span class="code-d">1</span><span class="code-s">) </span><span class="code-s">* </span><span class="code-a">lonCount</span><span class="code-s">;
	</span><span class="code-r">const </span><span class="code-r">int </span><span class="code-v">totalVertexCount </span><span class="code-s">= </span><span class="code-s">(</span><span class="code-a">latCount </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">) </span><span class="code-s">* </span><span class="code-s">(</span><span class="code-a">lonCount </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">)</span><span class="code-s">;
	</span><span class="code-r">const </span><span class="code-r">float </span><span class="code-v">latStep </span><span class="code-s">= </span><span class="code-n">pi </span><span class="code-s">/ </span><span class="code-a">latCount</span><span class="code-s">;
	</span><span class="code-r">const </span><span class="code-r">float </span><span class="code-v">lonStep </span><span class="code-s">= </span><span class="code-d">2 </span><span class="code-s">* </span><span class="code-n">pi </span><span class="code-s">/ </span><span class="code-a">lonCount</span><span class="code-s">;
 
	</span><span class="code-t">UVSphere </span><span class="code-v">sphere</span><span class="code-s">;

	</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">.</span><span class="None"></span><span class="code-f">resize</span><span class="code-s">(</span><span class="code-v">totalIndexCount</span><span class="code-s">)</span><span class="code-s">;
	</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">pos</span><span class="code-s">.</span><span class="None"></span><span class="code-f">resize</span><span class="code-s">(</span><span class="code-v">totalVertexCount</span><span class="code-s">)</span><span class="code-s">;
	</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">uvs</span><span class="code-s">.</span><span class="None"></span><span class="code-f">resize</span><span class="code-s">(</span><span class="code-v">totalVertexCount</span><span class="code-s">)</span><span class="code-s">;
 
	</span><span class="code-r">int </span><span class="code-v">currentVertex </span><span class="code-s">= </span><span class="code-d">0</span><span class="code-s">;
	</span><span class="code-r">int </span><span class="code-v">currentIndex </span><span class="code-s">= </span><span class="code-d">0</span><span class="code-s">;

	</span><span class="code-j">for </span><span class="code-s">(</span><span class="code-r">int </span><span class="code-v">lat </span><span class="code-s">= </span><span class="code-d">0</span><span class="code-s">; </span><span class="code-v">lat </span><span class="code-s">&lt</span><span class="code-s">= </span><span class="code-a">latCount</span><span class="code-s">; </span><span class="code-v">lat</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">) </span><span class="code-s">{
		</span><span class="code-j">for </span><span class="code-s">(</span><span class="code-r">int </span><span class="code-v">lon </span><span class="code-s">= </span><span class="code-d">0</span><span class="code-s">; </span><span class="code-v">lon </span><span class="code-s">&lt</span><span class="code-s">= </span><span class="code-a">lonCount</span><span class="code-s">; </span><span class="code-v">lon</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">) </span><span class="code-s">{
			</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">pos</span><span class="code-s">[</span><span class="code-v">currentVertex</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-t">vec3</span><span class="code-s">(
				</span><span class="code-f">cos</span><span class="code-s">(</span><span class="code-v">lon </span><span class="code-s">* </span><span class="code-v">lonStep</span><span class="code-s">) </span><span class="code-s">* </span><span class="code-f">sin</span><span class="code-s">(</span><span class="code-v">lat </span><span class="code-s">* </span><span class="code-v">latStep</span><span class="code-s">)</span><span class="code-s">,
				</span><span class="code-f">sin</span><span class="code-s">(</span><span class="code-v">lon </span><span class="code-s">* </span><span class="code-v">lonStep</span><span class="code-s">) </span><span class="code-s">* </span><span class="code-f">sin</span><span class="code-s">(</span><span class="code-v">lat </span><span class="code-s">* </span><span class="code-v">latStep</span><span class="code-s">)</span><span class="code-s">,
				</span><span class="code-f">cos</span><span class="code-s">(</span><span class="code-v">lat </span><span class="code-s">* </span><span class="code-v">latStep </span><span class="code-s">- </span><span class="code-n">pi</span><span class="code-s">)
			</span><span class="code-s">)</span><span class="code-s">;

			</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">uvs</span><span class="code-s">[</span><span class="code-v">currentVertex</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-t">vec2</span><span class="code-s">(
				</span><span class="code-d">1.f </span><span class="code-s">- </span><span class="code-s">(</span><span class="code-r">float</span><span class="code-s">)</span><span class="code-v">lon </span><span class="code-s">/ </span><span class="code-a">lonCount</span><span class="code-s">,
				</span><span class="code-s">(</span><span class="code-r">float</span><span class="code-s">)</span><span class="code-v">lat </span><span class="code-s">/ </span><span class="code-a">latCount
			</span><span class="code-s">)</span><span class="code-s">;

			</span><span class="code-v">currentVertex </span><span class="code-s">+</span><span class="code-s">= </span><span class="code-d">1</span><span class="code-s">;
		</span><span class="code-s">}
	</span><span class="code-s">}
 
	</span><span class="code-c">// Top cap
	</span><span class="code-c">//
	</span><span class="code-c">// One triangle connects the first lateral layer to the second per longitudinal count.
	</span><span class="code-c">// Even though the top points all have the same position, their UVs are different,
	</span><span class="code-c">// so each triangle uses a different point.
	</span><span class="code-c">//
	</span><span class="code-c">//          -------- lonCount --------&gt
	</span><span class="code-c">//                      lon
	</span><span class="code-c">//    |                  *
	</span><span class="code-c">//    |                / | \
	</span><span class="code-c">//    1             /    |    \
	</span><span class="code-c">//    |          /       |       \
	</span><span class="code-c">//    |       /                     \
	</span><span class="code-c">//   \ /     *------------*------------*
	</span><span class="code-c">//           v          v + 1        v + 2
 
	</span><span class="code-r">int </span><span class="code-v">v </span><span class="code-s">= </span><span class="code-a">lonCount </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;
	</span><span class="code-j">for </span><span class="code-s">(</span><span class="code-r">int </span><span class="code-v">lon </span><span class="code-s">= </span><span class="code-d">0</span><span class="code-s">; </span><span class="code-v">lon </span><span class="code-s">&lt </span><span class="code-a">lonCount</span><span class="code-s">; </span><span class="code-v">lon</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">) </span><span class="code-s">{
		</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">lon</span><span class="code-s">;
		</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v</span><span class="code-s">;
		</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;

		</span><span class="code-v">v </span><span class="code-s">+</span><span class="code-s">= </span><span class="code-d">1</span><span class="code-s">;
	</span><span class="code-s">}

	</span><span class="code-c">// Middle
	</span><span class="code-c">//
	</span><span class="code-c">// Each lateral layer has 2 triangles for every longitudinal count.
	</span><span class="code-c">//
	</span><span class="code-c">//          -------- lonCount --------&gt
	</span><span class="code-c">//          v          v + 1        v + 2
	</span><span class="code-c">//    |     *------------*------------*
	</span><span class="code-c">//    |     |          / |          / |
	</span><span class="code-c">// latCount |       /    |       /    |
	</span><span class="code-c">//    |     |    /       |    /       |
	</span><span class="code-c">//    |     | /          | /          |
	</span><span class="code-c">//   \ /    *------------*------------*
	</span><span class="code-c">//      v + lc + 1   v + lc + 2   (v + 1) + lc + 2

	</span><span class="code-v">v </span><span class="code-s">= </span><span class="code-a">lonCount </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;
	</span><span class="code-j">for </span><span class="code-s">(</span><span class="code-r">int </span><span class="code-v">lat </span><span class="code-s">= </span><span class="code-d">1</span><span class="code-s">; </span><span class="code-v">lat </span><span class="code-s">&lt </span><span class="code-a">latCount </span><span class="code-s">- </span><span class="code-d">1</span><span class="code-s">; </span><span class="code-v">lat</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">) </span><span class="code-s">{
		</span><span class="code-j">for </span><span class="code-s">(</span><span class="code-r">int </span><span class="code-v">lon </span><span class="code-s">= </span><span class="code-d">0</span><span class="code-s">; </span><span class="code-v">lon </span><span class="code-s">&lt </span><span class="code-a">lonCount</span><span class="code-s">; </span><span class="code-v">lon</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">) </span><span class="code-s">{
			</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v</span><span class="code-s">;
			</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v </span><span class="code-s">+ </span><span class="code-a">lonCount </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;
			</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;
 
			</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;
			</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v </span><span class="code-s">+ </span><span class="code-a">lonCount </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;
			</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v </span><span class="code-s">+ </span><span class="code-a">lonCount </span><span class="code-s">+ </span><span class="code-d">2</span><span class="code-s">;

			</span><span class="code-v">v </span><span class="code-s">+</span><span class="code-s">= </span><span class="code-d">1</span><span class="code-s">;
		</span><span class="code-s">}

		</span><span class="code-v">v </span><span class="code-s">+</span><span class="code-s">= </span><span class="code-d">1</span><span class="code-s">;
	</span><span class="code-s">}

	</span><span class="code-c">// Bottom cap

	</span><span class="code-c">// Same as top cap, but reversed.
	</span><span class="code-c">//
	</span><span class="code-c">//          -------- lonCount --------&gt
	</span><span class="code-c">//          v          v + 1        v + 2
	</span><span class="code-c">//    |     *------------*------------*
	</span><span class="code-c">//    |       \          |          /
	</span><span class="code-c">//    1          \       |       /
	</span><span class="code-c">//    |             \    |    /
	</span><span class="code-c">//    |                \ | /
	</span><span class="code-c">//   \ /                 *
	</span><span class="code-c">//                   v + lc + 1
 
	</span><span class="code-j">for </span><span class="code-s">(</span><span class="code-r">int </span><span class="code-v">lon </span><span class="code-s">= </span><span class="code-d">0</span><span class="code-s">; </span><span class="code-v">lon </span><span class="code-s">&lt </span><span class="code-a">lonCount</span><span class="code-s">; </span><span class="code-v">lon</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">) </span><span class="code-s">{
		</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v</span><span class="code-s">;
		</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v </span><span class="code-s">+ </span><span class="code-a">lonCount </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;
		</span><span class="code-v">sphere</span><span class="code-s">.</span><span class="code-w">index</span><span class="code-s">[</span><span class="code-v">currentIndex</span><span class="code-s">+</span><span class="code-s">+</span><span class="code-s">] </span><span class="code-s">= </span><span class="code-v">v </span><span class="code-s">+ </span><span class="code-d">1</span><span class="code-s">;

		</span><span class="code-v">v </span><span class="code-s">+</span><span class="code-s">= </span><span class="code-d">1</span><span class="code-s">;
	</span><span class="code-s">}
 
	</span><span class="code-j">return </span><span class="code-v">sphere</span><span class="code-s">;
</span><span class="code-s">}
</span></pre>
		</div>
	
			</div>
		</div>
	</div>

	<script src="../../projects/mesh/p5.min.js"></script>
	<script src="../../projects/mesh/draw_shape.js"></script>
	<script src="../../projects/mesh/uvsphere.js"></script>
</body>

</html>